# Production Environment Template for UMA Educational Platform
# Copy this file to .env and fill in the actual values

# =============================================================================
# SUPABASE CONFIGURATION (REQUIRED)
# =============================================================================

# Database Connection
# Get from Supabase Dashboard > Settings > Database > Connection String
# Use "Transaction" mode (port 6543) for containerized/serverless deployments
DATABASE_URL=postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres

# Supabase API Configuration  
# Get from Supabase Dashboard > Settings > API
SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# For production, use a managed Redis service like:
# - Redis Cloud: redis://default:[PASSWORD]@[HOST]:[PORT]
# - AWS ElastiCache: redis://[CLUSTER-ENDPOINT]:[PORT]
# - Upstash: redis://default:[PASSWORD]@[ENDPOINT]:[PORT]
REDIS_URL=redis://default:[PASSWORD]@[HOST]:[PORT]

# =============================================================================
# SECURITY CONFIGURATION (REQUIRED)
# =============================================================================

# Generate with: openssl rand -hex 32
SECRET_KEY=your-production-secret-key-here
ALGORITHM=HS256

# Token expiration settings
ACCESS_TOKEN_EXPIRE_MINUTES=60      # 1 hour for production
REFRESH_TOKEN_EXPIRE_DAYS=30        # 30 days for production

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Production SMTP settings (e.g., SendGrid, AWS SES, Mailgun)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your-smtp-password-here
EMAIL_FROM=noreply@yourdomain.com

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# OTP Configuration
OTP_EXPIRY_MINUTES=10
OTP_LENGTH=6

# URLs - Update these with your actual domain
FRONTEND_URL=https://yourdomain.com
BACKEND_URL=https://api.yourdomain.com

# Environment
ENVIRONMENT=production

# =============================================================================
# AI/ML API KEYS (OPTIONAL - Add as needed)
# =============================================================================

# Google Gemini API (for image analysis and lecture generation)
GEMINI_API_KEY=your-gemini-api-key-here

# Anthropic Claude API (for question generation and answer evaluation)
CLAUDE_API_KEY=your-claude-api-key-here

# OpenAI API (for future features)
# OPENAI_API_KEY=your-openai-api-key-here

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Next.js public variables
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NODE_ENV=production

# =============================================================================
# MONITORING & LOGGING (OPTIONAL)
# =============================================================================

# Sentry error tracking
# SENTRY_DSN=https://[KEY]@[ORGANIZATION].ingest.sentry.io/[PROJECT]

# LogDNA/Datadog/etc.
# LOG_LEVEL=info
# LOGGING_SERVICE_API_KEY=your-logging-service-key

# =============================================================================
# CORS & SECURITY HEADERS
# =============================================================================

# Comma-separated list of allowed origins
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Content Security Policy
# CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'..."

# =============================================================================
# RATE LIMITING (OPTIONAL)
# =============================================================================

# API rate limiting
# RATE_LIMIT_PER_MINUTE=100
# RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================

# 1. Database Connection:
#    - Use transaction mode (port 6543) for auto-scaling deployments
#    - Use session mode (port 5432) for persistent servers with IPv4 requirements
#    - Use direct connection (port 5432) for VMs with IPv6 support
#
# 2. Security:
#    - Never commit this file with actual values to version control
#    - Use environment variable injection in your deployment platform
#    - Rotate SECRET_KEY and API keys regularly
#
# 3. Performance:
#    - Monitor database connections in Supabase dashboard
#    - Adjust connection pool settings if needed
#    - Use Redis for session management and caching
#
# 4. Backups:
#    - Supabase provides automatic daily backups
#    - Consider setting up additional backup strategies for critical data